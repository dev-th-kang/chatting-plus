<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style1.css">
    <title>Document</title>
</head>
<body>
    <div class="frm_main">
    <div class="frm" >
        <h3>📃TODO</h3>
        <input class="todo_contents" type="text" placeholder="contents"><br>
        <button class="btn" type="button">제출</button>
    </div>
        <button class="menu_btn create_btn"></button>
        <button class="menu_btn list_btn"></button>
    </div>
    <script>
        const listDiv = document.querySelector('.list')
        const btn = document.querySelector('.btn');
        const positBtn = document.querySelector('.create_btn');
        const nonpositBtn = document.querySelector('.list_btn');
        positBtn.addEventListener('click',()=>{
            location.href='./index.htm';
        })
        nonpositBtn.addEventListener('click',()=>{
            location.href='./list.htm';
        })
        document.addEventListener('DOMContentLoaded',()=>{
            positBtn.style = "background-color:#1AAB8A;"
            positBtn.innerHTML = "✅TODO 작성";
            nonpositBtn.innerHTML = "🔥TODO 목록";
        })
        btn.addEventListener('click',()=>{
            const contents = document.querySelector('.todo_contents').value;
            document.querySelector('.todo_contents').value = "";
            //console.log(title+" "+content);
            if(contents == ""){
                alert("값을 입력해주세요!");
                return;
            }
            console.log(JSON.parse(sessionStorage.getItem("user")));
            fetch(`http://localhost:8000/todo/${JSON.parse(sessionStorage.getItem("user")).userid}`, {
                method: "POST",
                headers: {
                "Content-Type": "application/json",
            }, body: JSON.stringify({
                'contents': contents,
            }),
            })
            .then((response) => response.json())
            .then((data) =>{
                console.log(data);
                location.reload();
            });
        })
    </script>
</body>
</html>